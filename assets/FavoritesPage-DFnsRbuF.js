import{R as e,r as m}from"./index-CB5N3rpp.js";import{F as p}from"./Footer-xKqXVpvq.js";import{d as g,c as k,u as P}from"./PokemonList-DSboICHW.js";import{f as h,s as y,p as N,g as F}from"./App-DYKHi4eM.js";import{W as S}from"./WithGlobalSearch-BJSSzPsa.js";const C=()=>e.createElement("div",{className:"empty-favorites"},e.createElement("picture",null,e.createElement("img",{src:"/favorites.svg",alt:"Нет избранных покемонов",className:"empty-favorites-img",loading:"lazy"})),e.createElement("h2",null,"У вас пока нет избранных покемонов"),e.createElement("p",null,"Добавляйте покемонов в избранное, нажимая на значок сердечка на странице покемона")),O=({favoritePokemons:t,isLoading:s,error:a,favoriteIds:o})=>a?e.createElement("div",{className:"favorites-error-container"},e.createElement(h,{error:typeof a=="string"?new Error(a):a})):!s&&o.length===0?e.createElement(C,null):e.createElement("div",{className:"pokemon-grid"},t.map(r=>e.createElement(g,{key:r.id,pokemon:r})),s&&o.map((r,i)=>e.createElement(k,{key:`skeleton-${r}-${i}`}))),R=()=>{const{favorites:t}=P(),[s,a]=m.useState([]),[o,r]=m.useState(!0),[i,u]=m.useState(null);return m.useEffect(()=>{(async()=>{if(t.length===0){r(!1);return}r(!0),u(null);const E=t.map(n=>y(()=>F(n),{errorContext:`загрузка покемона #${n}`,errorType:"POKEMON_LOAD"})),v=await Promise.all(E),c=[];let f=!1;v.forEach(([n,l],d)=>{n?(console.error(`Ошибка при загрузке покемона #${t[d]}:`,n),f=!0):l&&c.push({...l,nameRu:N[l.name]||void 0})}),f&&c.length<t.length&&u({message:"Не удалось загрузить некоторых покемонов. Пожалуйста, попробуйте позже."}),c.sort((n,l)=>n.id-l.id),a(c),r(!1)})()},[t]),m.useMemo(()=>({favoritePokemons:s,isLoading:o,error:i,favoriteIds:t}),[s,o,i,t])},A=()=>{const{favoritePokemons:t,isLoading:s,error:a,favoriteIds:o}=R();return e.createElement("div",{className:"favorites-page"},e.createElement("main",{className:"main-content"},e.createElement("div",{className:"container"},e.createElement(S,null,e.createElement("h1",{className:"favorites-title"},"Избранные покемоны"),e.createElement(O,{favoritePokemons:t,isLoading:s,error:a,favoriteIds:o})))),e.createElement(p,null))};export{A as default};
