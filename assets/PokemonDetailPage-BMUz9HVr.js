import{r as c,R as e,L as G}from"./index-Df_6KZdj.js";import{u as L,s as x,p as B,l as K,g as _,a as q,b as Q,c as J,d as Y,e as $,L as M,E as Z,H as ee,f as P,h as te}from"./App-CF2eCG8w.js";import{F as R}from"./Footer-CdXV03ZN.js";import{c as ae,d as ne,u as re,e as F,f as se,h as D,T as A,t as I,i as le,j as oe,k as ie,l as ce,m as O,P as me}from"./PokemonList-Kbv9YHqt.js";import{W as ue}from"./WithGlobalSearch-CIfBekL4.js";const de=t=>{const[a,n]=c.useState(null),[o,r]=c.useState(null),[s,l]=c.useState(null),[i,m]=c.useState(!1),[u,d]=c.useState(null),E=L(g=>g.updateEvolutionChain),f=c.useCallback(async()=>{if(!t)return;m(!0),d(null);const[g,v]=await x(()=>_(t),{errorContext:"загрузка покемона",errorType:"POKEMON_LOAD"});if(g){d(g instanceof Error?g:new Error(g?.message||g)),m(!1);return}n({...v,nameRu:B[v.name]||void 0});const[p,k]=await x(()=>q(t),{errorContext:"загрузка вида покемона",errorType:"SPECIES_LOAD"});if(p)d(p instanceof Error?p:new Error(p?.message||p));else if(r(k),k&&k.evolution_chain&&k.evolution_chain.url){const[y,w]=await x(()=>Q(k.evolution_chain.url),{errorContext:"загрузка цепочки эволюции",errorType:"EVOLUTION_LOAD"});y?K(y,"Ошибка загрузки цепочки эволюции"):(l(w),E(w))}m(!1)},[t,E]);c.useEffect(()=>{f()},[f]);const N=c.useCallback(()=>{f()},[f]);return c.useMemo(()=>({pokemon:a,species:o,evolutionChain:s,isLoading:i,error:u,refetch:N}),[a,o,s,i,u,N])},Ee=(t,a,n,o=[])=>{const[r,s]=c.useState([]),[l,i]=c.useState(!0);return c.useEffect(()=>{(async()=>{if(!a||a.length===0){i(!1);return}i(!0);try{const u=a[0].type.name,d=`similar-${u}`;if(n[d]){const v=n[d].filter(p=>p.id!==Number(t)&&!o.includes(p.name));s(v.slice(0,8)),i(!1);return}const f=[...await J(u)].sort(()=>.5-Math.random()).slice(0,20),g=(await Promise.all(f.map(async({pokemon:v})=>{try{return await _(v.name)}catch(p){return console.error(`Ошибка при загрузке данных покемона ${v.name}:`,p),null}}))).filter(v=>v!==null&&v.id!==Number(t)&&!o.includes(v.name)).slice(0,8).map(v=>({...v,nameRu:B[v.name]||v.name}));s(g)}catch(u){console.error("Ошибка при получении похожих покемонов:",u),s([])}finally{i(!1)}})()},[t,a,n,o]),c.useMemo(()=>({similarPokemons:r,loading:l}),[r,l])},fe=(t={1200:4,768:3,576:2,0:1})=>{const[a,n]=c.useState(1);return c.useEffect(()=>{const o=()=>{const s=window.innerWidth,l=Object.keys(t).map(Number).sort((i,m)=>m-i);for(const i of l)if(s>=i)return t[i];return t[0]},r=()=>{n(o())};return n(o()),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t]),a},ve=(t,a,n=5e3)=>{const[o,r]=c.useState(0),[s,l]=c.useState(!1),[i,m]=c.useState(0),u=Math.max(0,t.length-a),d=t.length>a,E=c.useCallback(()=>{t.length<=a||r(h=>h>=u?0:h+1)},[t.length,a,u]),f=c.useCallback(()=>{t.length<=a||r(h=>h<=0?u:h-1)},[t.length,a,u]),N=c.useCallback(h=>{l(!0),m(h.pageX)},[]),g=c.useCallback(h=>{s&&h.preventDefault()},[s]),v=c.useCallback(h=>{if(!s)return;const T=h.pageX,C=i-T;Math.abs(C)>50&&(C>0?E():f()),l(!1)},[s,i,E,f]),p=c.useCallback(()=>{l(!1)},[]),k=c.useCallback(h=>{l(!0),m(h.touches[0].pageX)},[]),y=c.useCallback(h=>{s&&h.preventDefault()},[s]),w=c.useCallback(h=>{if(!s)return;const T=h.changedTouches[0].pageX,C=i-T;Math.abs(C)>50&&(C>0?E():f()),l(!1)},[s,i,E,f]);c.useEffect(()=>{if(t.length<=a)return;const h=setInterval(()=>{E()},n);return()=>clearInterval(h)},[t.length,a,E,n]);const H={transform:`translateX(-${o*(100/a)}%)`,transition:s?"none":"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)"};return{currentIndex:o,isDragging:s,showNavigation:d,maxIndex:u,trackStyle:H,goToNext:E,goToPrev:f,handleMouseDown:N,handleMouseMove:g,handleMouseUp:v,handleMouseLeave:p,handleTouchStart:k,handleTouchMove:y,handleTouchEnd:w}},W=({direction:t,onClick:a,disabled:n,className:o=""})=>{const r=t==="prev";return e.createElement("button",{className:`carousel-arrow carousel-arrow-${t} ${o}`,onClick:a,"aria-label":`${r?"Предыдущие":"Следующие"} покемоны`,disabled:n},e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},r?e.createElement("path",{d:"M15 18l-6-6 6-6"}):e.createElement("path",{d:"M9 18l6-6-6-6"})))},he=({trackStyle:t,loading:a,similarPokemons:n,onMouseDown:o,onMouseMove:r,onMouseUp:s,onMouseLeave:l,onTouchStart:i,onTouchMove:m,onTouchEnd:u})=>{const d=c.useRef(null);return e.createElement("div",{ref:d,className:"carousel-track",style:t,onMouseDown:o,onMouseMove:r,onMouseUp:s,onMouseLeave:l,onTouchStart:i,onTouchMove:m,onTouchEnd:u},a?Array.from({length:8},(E,f)=>e.createElement("div",{className:"carousel-item",key:`skeleton-${f}`},e.createElement(ae,null))):n.length>0?n.map((E,f)=>e.createElement("div",{className:"carousel-item",key:E.id,style:{animationDelay:`${f*.1}s`}},e.createElement(ne,{pokemon:E}))):e.createElement("div",{className:"no-similar-pokemons"},e.createElement("div",{className:"no-pokemons-content"},e.createElement("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5"},e.createElement("circle",{cx:"12",cy:"12",r:"10"}),e.createElement("path",{d:"M16 16s-1.5-2-4-2-4 2-4 2"}),e.createElement("line",{x1:"9",y1:"9",x2:"9.01",y2:"9"}),e.createElement("line",{x1:"15",y1:"9",x2:"15.01",y2:"9"})),e.createElement("p",null,"Похожие покемоны не найдены"))))},pe=({pokemonId:t,types:a,excludeNames:n=[]})=>{const{cache:o}=L(),r=fe(),{similarPokemons:s,loading:l}=Ee(t,a,o,n),{currentIndex:i,showNavigation:m,maxIndex:u,trackStyle:d,goToNext:E,goToPrev:f,handleMouseDown:N,handleMouseMove:g,handleMouseUp:v,handleMouseLeave:p,handleTouchStart:k,handleTouchMove:y,handleTouchEnd:w}=ve(s,r);return!a||a.length===0?null:e.createElement("div",{className:"similar-pokemons"},e.createElement("div",{className:"similar-pokemons-header"},e.createElement("h3",null,"Похожие покемоны")),e.createElement("div",{className:"carousel-wrapper"},m&&e.createElement(W,{direction:"prev",onClick:f,disabled:i===0}),e.createElement("div",{className:"carousel-container"},e.createElement(he,{trackStyle:d,loading:l,similarPokemons:s,onMouseDown:N,onMouseMove:g,onMouseUp:v,onMouseLeave:p,onTouchStart:k,onTouchMove:y,onTouchEnd:w})),m&&e.createElement(W,{direction:"next",onClick:E,disabled:i===u})))},ge=()=>{const t=Y();return e.createElement("button",{className:"back-button",onClick:()=>t(-1)},e.createElement("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:8,verticalAlign:"middle"}},e.createElement("path",{d:"M15 18l-6-6 6-6"})),"Назад")},X=c.memo(({pokemonId:t,pokemonName:a})=>{const{isFavorite:n,toggleFavorite:o}=re(),r=n(t),s=l=>{l.stopPropagation(),l.preventDefault(),o(t)};return e.createElement("button",{onClick:s,className:`favorites-button ${r?"is-favorite":""}`,"aria-label":r?`Удалить ${a} из избранного`:`Добавить ${a} в избранное`,title:r?"Удалить из избранного":"Добавить в избранное"},e.createElement("svg",{viewBox:"0 0 24 24",fill:r?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},e.createElement("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})))});X.displayName="FavoritesButton";const ke=c.memo(({pokemon:t})=>{const{id:a}=$(),n=t?.id||a,{src:o}=F(n),r=()=>window.innerWidth<=576?200:window.innerWidth<=768?240:300,[s,l]=e.useState(r());return e.useEffect(()=>{const i=()=>l(r());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),e.createElement("div",{className:"pokemon-detail-header"},e.createElement("div",{className:"pokemon-detail-info"},e.createElement("div",{className:"pokemon-detail-id"},se(n)),e.createElement("div",{className:"pokemon-detail-title"},e.createElement("h1",{className:"pokemon-detail-name"},D(t?.name,t?.nameRu)),e.createElement(X,{pokemonId:n,pokemonName:D(t?.name,t?.nameRu)})),e.createElement("div",{className:"pokemon-detail-types pokemon-detail-types--info"},t?.types?.map((i,m)=>e.createElement(A,{key:m,type:i.type.name,large:!0})))),e.createElement("div",{className:"pokemon-detail-image-row"},e.createElement("div",{className:"pokemon-detail-image-container"},e.createElement("img",{src:o,alt:t?.nameRu||t?.name,className:"pokemon-detail-image",loading:"lazy",width:s,height:s,onError:i=>{i.target.src="/official-artwork/unknown.webp"}})),e.createElement("div",{className:"pokemon-detail-types pokemon-detail-types--image"},t?.types?.map((i,m)=>e.createElement(A,{key:m,type:i.type.name,large:!0})))))}),Ne=(t,a="en",n="ru")=>{const[o,r]=c.useState(null),[s,l]=c.useState(!1);return c.useEffect(()=>{let i=!1;if(!t){r(null),l(!1);return}return l(!0),I(t,n,a).then(m=>{i||(r(m),l(!1))}).catch(()=>{i||l(!1)}),()=>{i=!0}},[t,a,n]),{translatedText:o,isTranslating:s}};function ye(t,a){if(t===a)return!0;if(!Array.isArray(t)||!Array.isArray(a)||t.length!==a.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==a[n])return!1;return!0}const we=(t,a="en",n="ru")=>{const[o,r]=c.useState([]),[s,l]=c.useState(!1),i=c.useRef([]);return c.useEffect(()=>{if(!ye(i.current,t)){if(i.current=t,!t||t.length===0){r([]),l(!1);return}l(!0),Promise.all(t.map(m=>I(m,n,a))).then(m=>{r(m),l(!1)}).catch(m=>{console.error("Ошибка при переводе текстов:",m),l(!1)})}},[t,a,n]),{translatedTexts:o,isTranslating:s}},U=(t,a="ru")=>{if(!t?.flavor_text_entries)return null;const n=t.flavor_text_entries.find(o=>o.language?.name===a);return n?n.flavor_text.replace(/\s+/g," ").replace(/[\n\r\u2028\u2029]+/g," ").trim():null},be=t=>U(t,"ru"),Ce=t=>U(t,"en"),Se=t=>t!=null,Me=({species:t})=>{const a=be(t),n=Ce(t),{translatedText:o,isTranslating:r}=Ne(a?null:n);return Se(t)?a?e.createElement("div",{className:"pokemon-description"},e.createElement("h3",null,"Описание"),e.createElement("p",null,a)):o?e.createElement("div",{className:"pokemon-description"},e.createElement("h3",null,"Описание"),e.createElement("p",null,o)):r?e.createElement("div",{className:"pokemon-description"},e.createElement("h3",null,"Описание"),e.createElement("p",null,"Переводим описание...")):e.createElement("div",{className:"pokemon-description"},e.createElement("h3",null,"Описание"),e.createElement("div",{className:"description-skeleton"},e.createElement("div",{className:"skeleton-line"}),e.createElement("div",{className:"skeleton-line"}),e.createElement("div",{className:"skeleton-line short"}))):e.createElement("div",{className:"pokemon-description"},e.createElement("h3",null,"Описание"),e.createElement("p",null,"Информация отсутствует для этой формы покемона"))},Te=c.memo(({pokemon:t})=>{const a=c.useMemo(()=>t?.abilities||[],[t?.abilities]),n=c.useMemo(()=>a.map(s=>s.ability.name),[a]),{translatedTexts:o,isTranslating:r}=we(n);return e.createElement("div",{className:"pokemon-attributes"},e.createElement("div",{className:"attribute height-attribute"},e.createElement("div",{className:"attribute-header"},e.createElement("svg",{className:"attribute-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M12 2L5 9h4v8h6V9h4z"})),e.createElement("span",{className:"attribute-label"},"Рост")),e.createElement("span",{className:"attribute-value"},le(t?.height))),e.createElement("div",{className:"attribute weight-attribute"},e.createElement("div",{className:"attribute-header"},e.createElement("svg",{className:"attribute-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("path",{d:"M8 8a4 4 0 0 1 8 0"}),e.createElement("circle",{cx:"12",cy:"15",r:"7"})),e.createElement("span",{className:"attribute-label"},"Вес")),e.createElement("span",{className:"attribute-value"},oe(t?.weight))),e.createElement("div",{className:"attribute abilities-attribute"},e.createElement("div",{className:"attribute-header"},e.createElement("svg",{className:"attribute-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2"},e.createElement("circle",{cx:"12",cy:"12",r:"5"}),e.createElement("path",{d:"M12 2v2"}),e.createElement("path",{d:"M12 20v2"}),e.createElement("path",{d:"M2 12h2"}),e.createElement("path",{d:"M20 12h2"}),e.createElement("path",{d:"M4.93 4.93l1.41 1.41"}),e.createElement("path",{d:"M17.66 17.66l1.41 1.41"}),e.createElement("path",{d:"M4.93 19.07l1.41-1.41"}),e.createElement("path",{d:"M17.66 6.34l1.41-1.41"})),e.createElement("span",{className:"attribute-label"},"Способности")),e.createElement("div",{className:"attribute-value"},r?e.createElement("div",{className:"description-skeleton",style:{width:"100%",maxWidth:300}},e.createElement("div",{className:"skeleton-line"}),e.createElement("div",{className:"skeleton-line short"})):e.createElement("ul",{className:"abilities-list"},a.map((s,l)=>e.createElement("li",{key:l,className:"ability-item"},e.createElement("span",{className:"ability-name"},o[l]||D(s.ability.name),s.is_hidden&&e.createElement("span",{className:"hidden-ability"}," (скрытая)"))))))))}),xe=({stats:t,types:a})=>{if(!t||!a)return null;const n=ie(a[0]?.type.name),o={hp:255,attack:190,defense:230,"special-attack":194,"special-defense":230,speed:180};return e.createElement("div",{className:"pokemon-stats"},e.createElement("h3",null,"Характеристики"),e.createElement("div",{className:"stats-container"},t.map(r=>{const s=ce(r.stat.name),l=o[r.stat.name]||100,i=Math.min(100,r.base_stat/l*100);return e.createElement("div",{key:r.stat.name,className:"stat-row"},e.createElement("div",{className:"stat-name"},s),e.createElement("div",{className:"stat-value"},r.base_stat),e.createElement("div",{className:"stat-bar-container"},e.createElement("div",{className:"stat-bar",style:{width:`${i}%`,backgroundColor:n}})))})))},Pe=({pokemon:t,species:a})=>{const n=O(t?.types||[]);return e.createElement("div",{className:"pokemon-detail-card",style:{background:n}},e.createElement(ke,{pokemon:t}),e.createElement("div",{className:"pokemon-detail-body"},e.createElement(Me,{species:a}),e.createElement(Te,{pokemon:t}),e.createElement(xe,{stats:t?.stats,types:t?.types})))},S=t=>Number(t.url.split("/").filter(Boolean).pop()),V=t=>t.evolves_to?t.evolves_to.length>1?!0:t.evolves_to.some(a=>V(a)):!1,Re=t=>{const a=[t];let n=t;for(;n.evolves_to&&n.evolves_to.length===1;)n=n.evolves_to[0],a.push(n);return a},De=(t,a,n)=>{if(!t||!a)return[];const o=t.getBoundingClientRect(),r=a.getBoundingClientRect();return n.map(s=>{if(!s.current)return null;const l=s.current.getBoundingClientRect(),i=r.left+r.width/2-o.left,m=r.top+a.offsetHeight-o.top,u=l.left+l.width/2-o.left,d=l.top-o.top;return{x1:i,y1:m,x2:u,y2:d}})},b=c.memo(e.forwardRef(({id:t,name:a,sprites:n,types:o,isCurrent:r},s)=>{const{src:l}=F(t),i=B[a]||a,m=O(o),u=()=>window.innerWidth<=776?48:window.innerWidth<=1180?56:72,[d,E]=e.useState(u());return e.useEffect(()=>{const f=()=>E(u());return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),e.createElement("div",{className:`evo-mini-card${r?" current":""}`,ref:s,style:{background:m}},e.createElement("img",{src:l,alt:i,className:"evo-mini-img",loading:"lazy",width:d,height:d,onError:f=>{f.target.src="/official-artwork/unknown.webp"}}),e.createElement("div",{className:"evo-mini-name multi-line"},i))}));b.displayName="EvoMiniCard";const Le=({nodes:t,currentPokemonId:a})=>e.createElement("div",{className:"evo-row"},t.map((n,o)=>{const r=S(n.species),s=Number(a)===r;return e.createElement(e.Fragment,{key:r},e.createElement(M,{to:`/pokemon/${r}`,className:"mini-pokemon-link"},e.createElement(b,{id:r,name:n.species.name,sprites:n.sprites||{},types:n.types||[],isCurrent:s})),o<t.length-1&&e.createElement("div",{className:"evo-row-arrow"},e.createElement("svg",{width:"48",height:"32",viewBox:"0 0 48 32"},e.createElement("line",{x1:"0",y1:"16",x2:"36",y2:"16",stroke:"#888",strokeWidth:"2.5"}),e.createElement("polygon",{points:"36,10 48,16 36,22",fill:"#888"}))))})),Be=t=>{const a=c.useRef(null),n=c.useRef(null),[o,r]=c.useState([]),s=c.useMemo(()=>t.map(()=>e.createRef()),[t]),l=c.useCallback(()=>{if(!a.current||!n.current)return;const i=De(a.current,n.current,s);r(i)},[s]);return c.useLayoutEffect(()=>{l()},[t.length,l]),c.useEffect(()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[l]),c.useEffect(()=>{if(!a.current)return;const i=new window.ResizeObserver(()=>{l()});return i.observe(a.current),n.current&&i.observe(n.current),s.forEach(m=>{m.current&&i.observe(m.current)}),()=>{i.disconnect()}},[t.length,s,l]),{arrowsContainerRef:a,parentRef:n,childRefs:s,arrowData:o}},_e=({arrowData:t})=>e.createElement("svg",{className:"evo-branch-arrows-svg",style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:2}},t.map((a,n)=>a&&e.createElement("path",{key:n,className:"evo-arrow-path",d:`M${a.x1},${a.y1} C${a.x1},${a.y1+32} ${a.x2},${a.y2-32} ${a.x2},${a.y2}`,stroke:"#888",strokeWidth:"2.5",fill:"none"}))),z=e.forwardRef(({node:t,currentPokemonId:a},n)=>{const o=S(t.species),r=Number(a)===o,s=c.useMemo(()=>t.evolves_to||[],[t.evolves_to]),{arrowsContainerRef:l,parentRef:i,childRefs:m,arrowData:u}=Be(s);return s.length?e.createElement("div",{className:"evo-branch-vert",style:{position:"relative"},ref:n},e.createElement("div",{className:"evo-branch-arrows-svg-wrapper",ref:l,style:{position:"relative",width:"100%",display:"flex",flexDirection:"column",alignItems:"center"}},e.createElement("div",{className:"evo-branch-parent",ref:i},e.createElement(M,{to:`/pokemon/${o}`,className:"mini-pokemon-link"},e.createElement(b,{id:o,name:t.species.name,sprites:t.sprites||{},types:t.types||[],isCurrent:r}))),e.createElement(_e,{arrowData:u}),e.createElement("div",{className:"evo-branch-children-row"},s.map((d,E)=>d.evolves_to&&d.evolves_to.length>0?e.createElement(z,{node:d,currentPokemonId:a,key:E,ref:m[E]}):e.createElement(M,{to:`/pokemon/${S(d.species)}`,className:"mini-pokemon-link",key:E,ref:m[E]},e.createElement(b,{id:S(d.species),name:d.species.name,sprites:d.sprites||{},types:d.types||[],isCurrent:Number(a)===S(d.species)})))))):e.createElement("div",{className:"evo-branch-vert",ref:n},e.createElement(M,{to:`/pokemon/${o}`,className:"mini-pokemon-link"},e.createElement(b,{id:o,name:t.species.name,sprites:t.sprites||{},types:t.types||[],isCurrent:r})))});z.displayName="EvolutionBranch";const $e=({evolutionChain:t,currentPokemonId:a})=>{if(!t?.chain)return null;const n=t.chain;if(!V(n)){const r=Re(n);return e.createElement("div",{className:"evo-tree-root center"},e.createElement(Le,{nodes:r,currentPokemonId:a}))}return e.createElement("div",{className:"evo-tree-root center"},e.createElement(z,{node:n,currentPokemonId:a}))},ze=({species:t,evolutionChain:a,pokemonId:n})=>e.createElement("div",{className:"evolution-section"},e.createElement("h2",null,"Эволюция"),t&&a?e.createElement($e,{evolutionChain:a,currentPokemonId:n}):e.createElement("div",null,"Информация о цепочке эволюции недоступна")),Ae=({species:t,pokemon:a})=>{const[n,o]=c.useState([]),[r,s]=c.useState(!0);return c.useEffect(()=>{if(!t||!t.varieties){o([]),s(!1);return}(async()=>{s(!0);const i=t.varieties.filter(u=>!u.is_default&&u.pokemon.name!==a.name),m=await Promise.all(i.map(async u=>{try{return await _(u.pokemon.name)}catch{return null}}));o(m.filter(Boolean)),s(!1)})()},[t,a]),r||!t||!t.varieties||n.length===0?null:e.createElement("div",{className:"alternative-forms-section"},e.createElement("h2",{className:"evolution-section-title"},"Альтернативные формы"),e.createElement("div",{className:"alternative-forms-row"},n.map(l=>e.createElement(M,{to:`/pokemon/${l.id}`,key:l.id,className:"mini-pokemon-link"},e.createElement(b,{id:l.id,name:l.name,sprites:l.sprites||{},types:l.types||[],isCurrent:!1})))))},We=({pokemon:t,species:a,evolutionChain:n,isLoading:o,error:r})=>{const{id:s}=$(),l=t?.id||s,{searchQuery:i}=L(),m=(a?.varieties||[]).filter(u=>!u.is_default&&u.pokemon.name!==t?.name).map(u=>u.pokemon.name);return i?e.createElement("div",{className:"pokemon-detail-page"},e.createElement("main",{className:"detail-content"},e.createElement("div",{className:"container"},e.createElement(me,null))),e.createElement(R,null)):!t&&!o?e.createElement(P,{error:new Error("Покемон не найден"),code:"404"}):r&&!o?e.createElement(P,{error:r,code:"404"}):e.createElement("div",{className:"pokemon-detail-page"},e.createElement("main",{className:"detail-content"},e.createElement("div",{className:"container"},e.createElement(ue,null,e.createElement(ge,null),e.createElement(Pe,{pokemon:t,species:a}),e.createElement(ze,{species:a,evolutionChain:n,pokemonId:l}),e.createElement(Ae,{species:a,pokemon:t}),e.createElement(pe,{pokemonId:l,types:t?.types,excludeNames:m})))),e.createElement(R,null))},Fe=()=>{const{id:t}=$(),{pokemon:a,species:n,evolutionChain:o,isLoading:r,error:s}=de(t),[l,i]=c.useState(!0);return c.useEffect(()=>{window.scrollTo(0,0),i(!0),r||i(!1)},[t,r]),l||r?e.createElement(G,null):e.createElement(We,{pokemon:a,species:n,evolutionChain:o,error:s,isLoading:r})},He=()=>e.createElement(Z,{FallbackComponent:({error:t})=>e.createElement("div",{className:"error-page"},e.createElement(ee,null),e.createElement(P,{message:te(t,"SERVER"),code:"500"}),e.createElement(R,null))},e.createElement(Fe,null));export{He as default};
